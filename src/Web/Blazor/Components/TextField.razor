<div class="relative @CssClass">
    <span class="absolute ml-2 pointer-events-none text-base transition-all text-gray-500 @TitleClass">@Title</span>
    <BindableInputText class="w-full p-2 rounded-md caret-orange transition-all bg-gray-100 border border-gray-300 focus:border-gray-700"
                       @onfocus="OnFocus"
                       @onblur="OnBlur"
                       @bind-Value="Value"
    >
    </BindableInputText>
    <span class="absolute pointer-events-none top-2 right-2">
        <i class="fas fa-search"></i>
    </span>
</div>

@code {
    private string _value { get; set; }
    [Parameter] 
    public string Value
    {
        get => _value;
        set
        {
            _value = value;

            ValueChanged.InvokeAsync(_value);
        }
    }

    [Parameter]
    public string Title { get; set; }
    [Parameter]
    public string CssClass { get; set; }
    [Parameter] 
    public EventCallback<string> ValueChanged { get; set; }  

    private string TitleClass =>
        (string.IsNullOrWhiteSpace(Value), _hasFocus) switch
        {
            (_, true) or (false, _) => "-top-full text-sm mt-4",
            _ => "top-0 mt-2"
            };

    private bool _hasFocus;

    private void OnFocus(FocusEventArgs args)
    {
        _hasFocus = true;
    }

    private void OnBlur(FocusEventArgs args)
    {
        _hasFocus = false;
    }
}